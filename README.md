## DirDuel 
 это небольшое TUI-приложение на Go: двухпанельный файловый менеджер с встраиваемым простым «терминалом», реализованный с помощью bubbletea (github.com/charmbracelet/bubbletea) и go-runewidth. Ниже — краткое описание, ключевые возможности, важные детали реализации и пара замечаний/предложений.


### Кратко

Две панели (левая/правая) показывают содержимое директорий; под ними — терминал с вводом и историей команд.
Навигация/фокус между панелями и терминалом, можно заходить в директории, открывать файлы (показывает сообщение), выполнять команды через встроенный парсер/обёртку над системными утилитами.
Цветной вывод и простая обработка ширины символов/обрезки строк.

### Ключевые возможности и поведение

#### Панели:
- Показывают список os.DirEntry для текущей директории (leftDir/rightDir).
- Выделение курсором, прокрутка (offset).
- Enter в директории — заход в неё и обновление списка файлов; Enter по файлу — запись в терминал "Открыт файл: <путь>".
- Alt+Left / Alt+Right — переключает активную панель (если фокус не в терминале).
#### Фокус:
- Tab переключает фокус между «терминалом» и текущей активной панелью.
- Стрелки Up/Down перемещают курсор в панели или перемещаются по истории терминала.
- Left/Right без Alt: в панели — выход/вход в директорию (Left = parent).
#### Терминал:
- Редактирование строки с курсором, поддержка Backspace/Delete, вставки рун, история команд (Up/Down).
- По Enter парсится команда и выполняется runCommand, результат печатается в termOutput (фиксированный вывод над терминальной строкой).
- Визуально курсор показан инвертированием символа (ANSI invert).
#### Встроенные команды (реализованы в runCommand):
- ls (поддерживает флаги -a, -l, -1), clear, pwd, cd, cat, mkdir, touch, rm, cp, mv, echo, ping, help.
- Неизвестная команда вызывается как внешняя через exec.Command.
#### Отрисовка:
- Блоки рамок с разными символами для активного/неактивного состояния.
- Обрезка длинных строк с учётом ширины рун (runewidth).
- stripANSI использует regexp для удаления SGR-последовательностей, чтобы корректно считать ширину.

#### Важные детали реализации


- Зависимости: bubbletea, mattn/go-runewidth.
- Используется os.Chdir в cd — это меняет рабочую директорию процесса (влияет на os.Getwd).
- ls в текущей реализации читает os.Getwd(), а не директорию панели. Это значит, ls отражает текущую рабочую директорию процесса (которую меняет cd), но панели (leftDir/rightDir) не синхронизируются автоматически с cd.
- Команда clear возвращает специальную метку "CLEAR", но текущая обработка результата команд в Update просто добавляет строки результата в вывод: специальная метка фактически не обрабатывается (то есть clear не очищает termOutput).
- Для определения Windows ping использует os.Getenv("OS") и поиск подстроки "windows" — лучше использовать runtime.GOOS.
- Вызов внешней команды (default) выполняется синхронно; при длительной/залипающей команде UI будет заблокирован.
